layout: true
class: center, middle
---
# Episode 020
## Using the HttpClient
ASP.NET Core: From 0 to overkill

---
layout: true
class: justify
---

## In the previous episode
- A closer look at authorization: roles, claims and policies

    - Authorize access using roles

    - Authorize access using policies

        - Indicating required policy

            - Declaratively with attributes 
            
            - Using Razor Pages conventions

        - Checking if policy is fulfilled

            - Using quick helpers, like `RequireClaim`

            - Using authorization handlers
---

## In this episode
- We start creating the backend for frontend (or BFF)

    - New web project

    - Using the `HttpClient` to make requests to the group management service

        - How the `HttpClient` was used before ASP.NET Core 2.1, and its problems
        
        - How to configure and use the `HttpClient`

        - Using Polly to add retry logic

---
## The backend for frontend
- The goal of the backend for frontend, is to simplify the frontend's job, by exposing an optimized API for its needs. 

- It shouldn't have business logic, only client specific logic.

- We'll also take advantage of the BFF to help the frontend with the authentication logic (in the following episodes).

- Implementing the BFF now will seem dumb, as it will just proxy the requests to the other service, but this should change in the future.

- For cases like the current, where we just want to proxy the frontend's requests, we'll eventually take a look at something like ProxyKit \* or Ocelot \*\*, instead of doing it manually. Right now, it serves as an excuse to play with the `HttpClient`.

.footnote[\* https://github.com/damianh/ProxyKit
\*\* https://github.com/ThreeMammals/Ocelot]


---

## Before starting...
- If these videos are being useful

    - Like the video

    - Share it

    - Leave feedback

- Why bother?

    - Lets me know if the time investment is worth it

    - Hopefully, better metrics => YouTube recommending the videos to more people ðŸ™‚

---
layout: true
class: center, middle
---
# Code!